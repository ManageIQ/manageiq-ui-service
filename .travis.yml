language: node_js
node_js:
- 6.7.0
sudo: false
cache:
  directories:
  - node_modules
before_install:
- npm install -g yarn@0.18.1
install:
- yarn install --force
after_script:
- codeclimate-test-reporter < reports/coverage/report-lcov/lcov.info
notifications:
  webhooks:
    urls:
    - https://webhooks.gitter.im/e/c8c40bc13ee38867f698
    on_success: change
    on_failure: always
    on_start: never
env:
  global:
  - MOCK_API_HOST=localhost:3004
addons:
  sauce_connect:
    username: chaleredhat
  jwt:
    secure: C/I/mUX5OUmr/a+sywYKYSt/99A1NKVrs62oJbu6aFLR3H3e/vp5vvYLLV2FpdLmeoNMvLhnbTZ0w5/rcC64YOjURHFZh+0Ve9uh3+L9Dro3EkshRIFGm32ve9ZIh1usPt1s9OBUa8KXKthiKVA4rv1DCqUCi0AFUqP0ejBD1TlnBBKR4aXCV6c3lpW8/hELEbaAaIZrfMgA2sMNBntFiygJVsUithpGx6LTwxmVT/RICURjzSRLiKXvHclIUVwFyFiVWi00buOIsaY56q+hIpJ0yK2oA5TjdIuxuZzRvopQHpw0SfSqfJtcNPpq51zs/TayhmAclWTcbAt/ybYD4PZlCl+SgqC3Wj51JE4/iMCvZA+otahtbhlPHDmsoE5N8xuAyBu8sGRa4GWPc2uSqUhaOzU850FW9mzq/GD0oTUPxp4HRu3JdBRGikvX88znBwyOtGOjmzlwkQymMEnIgnwdNJmVXwBHo6jPZ8ndDSDLmb1gTgYFpzXwYQ4MhhszO/7y2OpDzV6ZgBWVohb4LwzoJpn0mlJ1HfmqtQzoK/Nornqj5Tz1AoWTgdkAhhrH8O0jwbdSfudd41d9lNCXoUNIg6+F9VSKYCTohb0Yne4Rot5MmBoQoA1NGDnwB/DLzK1g4W0nxekKuAtQzF9AaieSmz7zHzZ/b/K07Akyy2I=
script:
- yarn start:mock-api &
- yarn start &
- '[ "${TRAVIS_PULL_REQUEST}" = "false" ] && yarn test:e2e || true'
