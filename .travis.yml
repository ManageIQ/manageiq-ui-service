language: node_js
node_js:
- 6.7.0
sudo: false
cache:
  directories:
  - node_modules
before_install:
- npm install -g yarn@0.18.1
install:
- yarn install --force
after_script:
- codeclimate-test-reporter < reports/coverage/report-lcov/lcov.info
notifications:
  webhooks:
    urls:
    - https://webhooks.gitter.im/e/c8c40bc13ee38867f698
    on_success: change
    on_failure: always
    on_start: never
env:
  global:
  - MOCK_API_HOST=localhost:3004
  - secure: n/5xDvxiD9MB3/FdX/iwK7kz/4XG9PQAanJK2wGVEA89fzi6rqu6vPYaGw9w1ClcHLWiw6/x16JlIbHlutYnsM1eCsnR0FQDuKFtJeotJLRxbP3zRY8aRf5UvkqvMOhIYOpJigHxJ50kR4cqUxLSZs0gRF6/di9le/ab0H8EeH1MhE5RW+D9aXUnP4t+tqon7xKbVI+56FHndNv7Jd3tE0F7fWDecNRTGQCLiA6Ah72kN5raH0Xq8s2VWx7dqhwoae2Wk0miZMz14H7fXz4nXD6A76SKYj3WqYE3tg5p9ui1tsZwPoKXsDCMn8K/sVaUzlvU3NrzBmG6/kcOFXRAKP2/XztXxuprLJbD6I9eDf5U4FQZiKwDbUCdfDkddgTOjQrao17YQaslwJ1CfuVEpRsL486av2O+1vqLOmcQLTXWj3Kl8ZltT0/SXK2fObc1OKUu6vUX9+1IJZ+eIL+g6dH4R/zoLuU3Pd/jiNY5DGXoGn2Ii7HjN0B1+cDUyhvmZKdrxSte+x6yXT0dEUaMuPSqk6hQBgz5GCVPHd0VhiSR3g+ztUeuDCMOtNtc0WjwNwkAToY9xkK/HnmTrtLBGodYty77euqIqrEl3sAMuvoOtCRXvoEsTcy29PoE/AwQUzriTQUF6JHB+1MnTvTBMKMc0HiVQzcrtWH4IUYp7ro=
  - secure: er2lzDGgiVphIBJCUN+Cr+qMXtwR3QvUt2NoKsRJXGQ7pHGetxbxb+0Ot0s/mjw7lHtW5yhbuVNRbmcKEx22Gigxgoenl5mHLM3QU0YWYqygLdis9WDQ6Ql4VCe8uzeNB9wPFThOqAEpxtic6y/tn30Q0L3Gw65+ODL9cNHMuuHhbAWrs5pwU/10+1oGImKQ7JcB+bxp045qKQEDAxUMazNSNeCOupKopvjoeHXesMr1b8SXy3FIgHnLpcE3LJVIUuwS7QB9tyEkyqi5Pt3AMLqqfbDUVSh+zsvVB9QEyxxe9OXrgBYucW1GFkOsCnl2+ayrCbnSVhpBALd9jfgT9d2XcvdURdB+ZSW3KKXFjWlWNmhn7jTIebgc36mkC9Q9OO4yiq7RZANIDYm1OsZi8YZmB9Y+D7QHLr++pj9Z6obCRtQSpRE9oUx1a0qonm3NRe7YvhmW32mOUM/xvBMkeoqzf98x8q67UvzEf0KwTZ8FT7b+xBFFQ/RUDFLPzAFOMr+K8hcw1fHVSw/lYZVxBJn3J2vuFHvGOmiswdXTKj64ZYchqHB+VieXz9FuygV/EFZ0+Tj+vFOeHA/Vcvf2btEbgGDMfbJHnZKMLbhz/0m9C1QTVYI18fRyfvbGgoDB638DS6z9S7ABkqsNeALSGRJ044woLtSKkfXPfJsTIhE=
addons:
  sauce_connect: true
script:
- yarn start:mock-api &
- yarn start &
- '[ "${TRAVIS_PULL_REQUEST}" = "false" ] && yarn test:e2e || true'
